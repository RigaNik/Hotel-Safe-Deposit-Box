(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(60)},33:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(22),i=n.n(r),s=(n(33),n(5)),c=n(6),d=n(9),u=n(7),l=n(10),p=n(2),m=n(23),f=n(24),v="ADD_KEY",g="GO_IDLE_STATE",h="GO_ERROR_STATE",w="GO_TO_SERVICE_MODE",y="VALIDATION_START",O="VALIDATION_SUCCESS",b="VALIDATION_ERROR",k="UNLOCK_DEPOSIT_BOX",E="UNLOCK_DEPOSIT_BOX_SUCCESS",S="LOCK_DEPOSIT_BOX",_="LOCK_DEPOSIT_BOX_SUCCESS",T=new f.a({savedPassword:"",password:"",lock:!1,status:"Ready",idle:!0,serviceMode:!1,sn:"9859111688",loading:!1});function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new T,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case v:return e.merge({password:e.serviceMode||6!==e.password.length?e.password+n:e.password,idle:!1});case g:return e.merge({idle:!0});case w:return e.merge({serviceMode:!0,status:"Service",password:""});case h:return e.merge({status:"Error",password:"",loading:!1});case y:return e.merge({status:"Validating",loading:!0,password:""});case O:return e.merge({status:"Ready",loading:!1,lock:!1,serviceMode:!1,password:"",savedPassword:""});case b:return e.merge({status:"Error",loading:!1,password:""});case k:return e.merge({lock:!0,status:"Unlocking",password:"",loading:!0});case E:return e.merge({lock:!1,status:"Ready",password:"",loading:!1});case S:return e.merge({lock:!1,status:"Locking",savedPassword:n,password:"",loading:!0});case _:return e.merge({lock:!0,status:"Ready",loading:!1});default:return e}}var M=function(){return Object(p.c)({depositBox:C})},I=n(8),L=n(27),N=(n(38),n(39),function(e){var t=e.lock,n=e.status,o=e.password,r=e.idle;return a.a.createElement("div",{className:r?"sdb--screen sdb--screen--idle":"sdb--screen"},a.a.createElement("p",{className:"sdb--screen--lock"},t?"Locked":"Unlocked"),a.a.createElement("p",{className:"sdb--screen--state"},o.length?o:n))}),A=n(26),D={baseUrl:"http://localhost:3000",validationRoute:"https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a"},R={inputDelayTimeout:1e3,mechanicalValidationTimeout:3e3,serviceValidationTimeout:3e3,screenLightTimeout:5e3},B=function(){return{type:y}},j=function(){return{type:O}},K=function(){return{type:b}},V=function(){return{type:h}},x=function(e){return{type:S,payload:e}},U=function(){return{type:_}},P=function(){return{type:k}},X=function(){return{type:E}},G=[7,8,9,4,5,6,1,2,3,"*",0,"L"],J=(n(59),function(e){var t=e.padKey,n=e.keyAction,o=e.disabled;return a.a.createElement("div",{className:o?"sdb--button sdb--button--disabled":"sdb--button","aria-disabled":o,onClick:function(){return n(t)}},a.a.createElement("p",{className:"sdb--button--paragraph"},t))}),W=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).handleKeyBoardInputs=function(t){var n=t.key.toUpperCase();-1!==G.toString().indexOf(n)&&e.addKey(n)},e.addKey=function(t){var n=e.props,o=n.addKeyAction,a=n.depositBox,r=a.serviceMode;a.loading||(r||isNaN(t)?r&&o&&o(t):o&&o(t),clearTimeout(e.inputSubmit),r||"L"!==t?e.inputSubmit=setTimeout(function(){e.checkServiceMode(),e.keySubmit(),e.validateMasterCode()},R.inputDelayTimeout):(e.keySubmit(),e.checkServiceMode()))},e.sceenLightOff=null,e.inputSubmit=null,e}return Object(l.a)(t,e),Object(c.a)(t,[{key:"keySubmit",value:function(){var e=this.props,t=e.locking,n=e.unlocking,o=e.depositBox,a=o.password,r=o.savedPassword,i=o.lock;o.serviceMode||6!==a.length||(i?n&&n(r,a):t&&t(a))}},{key:"checkServiceMode",value:function(){var e=this.props,t=e.depositBox,n=e.goToServiceModeAction,o=t.password,a=t.serviceMode;t.lock&&!a&&6===o.length&&"000000"===o&&n&&n()}},{key:"validateMasterCode",value:function(){var e=this.props,t=e.depositBox,n=e.validateMasterCode,o=t.password,a=t.serviceMode,r=t.lock,i=t.sn;r&&a&&o.length>=12&&(12===Object(L.a)(new Set(o.split(""))).length&&n&&n(o,i))}},{key:"checkIdleState",value:function(){var e=this.props.goIdleAction;clearTimeout(this.sceenLightOff),this.sceenLightOff=setTimeout(function(){e&&e()},R.screenLightTimeout)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyBoardInputs)}},{key:"render",value:function(){var e=this,t=this.props.depositBox,n=t.lock,o=t.status,r=t.password,i=t.idle,s=t.loading,c=t.sn;return i||this.checkIdleState(),a.a.createElement("div",{className:"sdb--wrapper"},a.a.createElement(N,{lock:n,status:o,password:r,idle:i}),a.a.createElement("div",{className:"sdb--wrapper--keyboard"},G.map(function(t,n){return a.a.createElement(J,{key:n,padKey:t,disabled:s,keyAction:e.addKey})})),a.a.createElement("p",{className:"sdb--wrapper--serial-number"},"S/N: ",c))}}]),t}(o.Component),q={goToServiceModeAction:function(){return{type:w}},validateMasterCode:function(e,t){return function(n){n(B()),A.get("".concat(D.validationRoute,"?code=").concat(e)).then(function(e){setTimeout(function(){e.sn===t?n(j()):n(K())},R.serviceValidationTimeout)}).catch(function(){n(K())})}},addKeyAction:function(e){return{type:v,payload:e}},locking:function(e){return function(t){t(x(e)),setTimeout(function(){t(U())},R.mechanicalValidationTimeout)}},unlocking:function(e,t){return function(n){n(P()),setTimeout(function(){n(e===t?X():V())},R.mechanicalValidationTimeout)}},goIdleAction:function(){return{type:g}}},z=Object(I.b)(function(e){return{depositBox:e.depositBox}},q)(W),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[m.a],n=p.a.apply(void 0,t),o="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):p.d;return Object(p.e)(M(),e,o(n))}(),$=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(I.a,{store:Y},a.a.createElement(z,null))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.1dd7f3a7.chunk.js.map